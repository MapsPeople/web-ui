{"version":3,"file":"mi-search.entry-2813becc.js","sources":["../../../components/dist/esm/mi-search.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host } from './index-7e9696f3.js';\nimport { c as createCommonjsModule, g as getDefaultExportFromCjs } from './_commonjsHelpers-ba3f0406.js';\n\nvar Debounce$1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = outerDecorator;\nexports.debounce = debounce;\nvar DEFAULT_DEBOUNCE_DURATION = 500;\n\nexports.DEFAULT_DEBOUNCE_DURATION = DEFAULT_DEBOUNCE_DURATION;\n/** Decorates a class method so that it is debounced by the specified duration */\n\nfunction outerDecorator(duration) {\n  return function innerDecorator(target, key, descriptor) {\n    return {\n      configurable: true,\n      enumerable: descriptor.enumerable,\n      get: function getter() {\n        // Attach this function to the instance (not the class)\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: descriptor.enumerable,\n          value: debounce(descriptor.value, duration)\n        });\n\n        return this[key];\n      }\n    };\n  };\n}\n\n/** Debounces the specified function and returns a wrapper function */\n\nfunction debounce(method) {\n  var duration = arguments.length <= 1 || arguments[1] === undefined ? DEFAULT_DEBOUNCE_DURATION : arguments[1];\n\n  var timeoutId = undefined;\n\n  function debounceWrapper() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    debounceWrapper.clear();\n\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      method.apply(_this, args);\n    }, duration);\n  }\n\n  debounceWrapper.clear = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  return debounceWrapper;\n}\n});\n\nvar dist = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopExportWildcard(obj, defaults) { var newObj = defaults({}, obj); delete newObj['default']; return newObj; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n\n\nvar _DebounceJs2 = _interopRequireDefault(Debounce$1);\n\nexports['default'] = _DebounceJs2['default'];\n\n_defaults(exports, _interopExportWildcard(Debounce$1, _defaults));\n});\n\nconst Debounce = /*@__PURE__*/getDefaultExportFromCjs(dist);\n\nconst searchCss = \"mi-search{display:block;position:relative;}mi-search input[type=search]{border-radius:8px;background-color:#ffffff;padding-left:40px;height:48px;font-size:1rem;padding-right:40px;font-family:-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Oxygen, Ubuntu, Cantarell, \\\"Fira Sans\\\", \\\"Droid Sans\\\", \\\"Helvetica Neue\\\", Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\";-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;position:relative;background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS43MSAxMUgxMi41TDE3LjQ5IDE2TDE2IDE3LjQ5TDExIDEyLjVWMTEuNzFMMTAuNzMgMTEuNDNDOS41OSAxMi40MSA4LjExIDEzIDYuNSAxM0MyLjkxIDEzIDAgMTAuMDkgMCA2LjVDMCAyLjkxIDIuOTEgMCA2LjUgMEMxMC4wOSAwIDEzIDIuOTEgMTMgNi41QzEzIDguMTEgMTIuNDEgOS41OSAxMS40MyAxMC43M0wxMS43MSAxMVpNMiA2LjVDMiA4Ljk5IDQuMDEgMTEgNi41IDExQzguOTkgMTEgMTEgOC45OSAxMSA2LjVDMTEgNC4wMSA4Ljk5IDIgNi41IDJDNC4wMSAyIDIgNC4wMSAyIDYuNVoiIGZpbGw9IiM4RDk4QUEiLz4KPC9zdmc+Cg==\\\");background-repeat:no-repeat;background-position:16px center;border-color:#E6E6E6;color:var(--tailwind-colors-neutral-500);border:1px solid var(--tailwind-colors-gray-200)}mi-search input[type=search]:focus{border-color:#3b82f6;box-shadow:0 0 0 2px #cfe0fc;}mi-search input[type=search][disabled]{pointer-events:none}mi-search input::-webkit-search-cancel-button{-webkit-appearance:none}mi-search input::-ms-clear{display:none}mi-search input::-moz-search-clear-button{-moz-appearance:none}mi-search button{position:absolute;right:14px;top:50%;transform:translateY(-50%);width:20px;height:20px;background-color:#6b7280;border-radius:50%;padding:0;border-width:0;display:flex;align-items:center;justify-content:center}mi-search button:focus{outline:0}mi-search button svg{fill:white;width:10px;height:10px}\";\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst Search = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.results = createEvent(this, \"results\", 7);\n    this.cleared = createEvent(this, \"cleared\", 7);\n    this.componentRendered = createEvent(this, \"componentRendered\", 7);\n    this.shortInput = createEvent(this, \"shortInput\", 7);\n    this.changed = createEvent(this, \"changed\", 7);\n    /**\n     * Sets the prevention of the search.\n     */\n    this.preventSearch = false;\n    this.placeholder = '';\n    this.idAttribute = '';\n    this.dataAttributes = {};\n    this.mapsindoors = false;\n    this.google = false;\n    this.mapbox = false;\n    this.language = 'en';\n    this.miFields = 'name,description,aliases,categories,externalId';\n    this.miTake = undefined;\n    this.miSkip = undefined;\n    this.miOrder = undefined;\n    this.miCategories = undefined;\n    this.miNear = undefined;\n    this.miVenue = undefined;\n    this.gmCountryCode = undefined;\n    this.value = undefined;\n    this.disabled = false;\n    this.sessionToken = undefined;\n    this.userPosition = undefined;\n  }\n  valueChange(newValue) {\n    if (!newValue || !this.inputElement) {\n      return;\n    }\n    if (newValue !== this.inputElement.value) {\n      // If newValue is different from what is in the input element, we know it's set from outside the component.\n      this.inputElement.value = newValue;\n      if (!this.preventSearch) {\n        this.inputChanged();\n      }\n    }\n  }\n  /**\n   * Clear the input field.\n   */\n  async clear() {\n    this.inputElement.value = '';\n    this.value = '';\n    this.lastRequested = null;\n    this.cleared.emit();\n  }\n  /**\n   * Programmatically trigger the search.\n   */\n  triggerSearch() {\n    const inputValue = this.inputElement.value;\n    this.search(inputValue);\n  }\n  /**\n   * Sets text to be shown in the search field.\n   * Setting it will not perform a search.\n   */\n  setDisplayText(displayText) {\n    this.preventSearch = true;\n    this.inputElement.value = displayText;\n    this.value = displayText;\n    this.preventSearch = false;\n  }\n  /**\n   * Set focus on the input field.\n   * The preventScroll boolean is passed as true to prevent the browser\n   * from scrolling the document to bring the newly-focused element into view.\n   */\n  focusInput() {\n    this.inputElement.focus({ preventScroll: true });\n  }\n  /**\n   * Get hold of the search input field.\n   */\n  async getInputField() {\n    return this.inputElement;\n  }\n  /**\n   * Perform the search.\n   */\n  search(inputValue) {\n    Promise.all([\n      this.makeMapsIndoorsQuery(inputValue),\n      this.makeGooglePlacesQuery(inputValue),\n      this.getMapboxSearchResults(inputValue),\n    ])\n      .then(results => {\n      this.lastRequested = inputValue;\n      if (this.google) {\n        this.pushResults(results[0].concat(results[1]));\n      }\n      else if (this.mapbox && mapboxgl.accessToken) {\n        this.pushResults(results[0].concat(results[2]));\n      }\n      else {\n        this.pushResults(results[0]);\n      }\n    });\n  }\n  /**\n   * Handles incoming input change event, eg. input field value has changed.\n   * The function is debounced 500ms to avoid firing too many requests while typing.\n   */\n  inputChanged() {\n    const inputValue = this.inputElement.value;\n    this.value = inputValue; // reflect on value attribute\n    if (!this.preventSearch) {\n      if (inputValue.length < 2) {\n        this.lastRequested = null;\n        if (inputValue.length === 1) {\n          this.shortInput.emit();\n        }\n        else {\n          this.clear();\n        }\n        return;\n      }\n      if (inputValue.length > 1 && inputValue !== this.lastRequested) {\n        this.search(inputValue);\n      }\n      this.changed.emit();\n    }\n  }\n  /**\n   * Push the results via the results event.\n   * @param object[] Locations\n   */\n  pushResults(locations) {\n    this.results.emit(locations);\n  }\n  /**\n   * Make MapsIndoors locations request based on given search query.\n   * @param {string} query\n   * @return {Promise<any[]>}\n   */\n  makeMapsIndoorsQuery(query) {\n    if (!this.mapsindoors) {\n      return Promise.resolve([]);\n    }\n    // Transform miNear string attribute to object if it matches a latlng\n    let miNear;\n    if (this.miNear) {\n      miNear = this.miNear;\n      if (/^(-?\\d+(\\.\\d+)?),\\s*(-?\\d+(\\.\\d+)?)$/.test(this.miNear)) {\n        const near = this.miNear.split(',');\n        miNear = { lat: parseFloat(near[0]), lng: parseFloat(near[1]) };\n      }\n    }\n    return mapsindoors.services.LocationsService.getLocations({\n      q: query.trim(),\n      fields: this.miFields,\n      take: this.miTake,\n      skip: this.miSkip,\n      orderBy: this.miOrder,\n      near: miNear,\n      venue: this.miVenue,\n      categories: this.miCategories\n    });\n  }\n  /**\n   * Make Google Places autocomplete suggestion request.\n   *\n   * @param {string} query\n   * @return {Promise<any>}\n   */\n  makeGooglePlacesQuery(query) {\n    if (this.google) {\n      if (!this.googleAutocompleteService) {\n        this.googleAutocompleteService = new google.maps.places.AutocompleteService();\n      }\n    }\n    else {\n      this.googleAutocompleteService = null;\n    }\n    if (!this.googleAutocompleteService) {\n      return Promise.resolve([]);\n    }\n    return new Promise((resolve) => {\n      const params = {\n        input: query,\n        language: this.language\n      };\n      if (this.gmCountryCode) {\n        params.componentRestrictions = { country: this.gmCountryCode };\n      }\n      this.googleAutocompleteService.getPlacePredictions(params, (results) => {\n        const places = (results || []).map((result) => ({\n          id: result.place_id,\n          type: 'Feature',\n          properties: {\n            type: 'google_places',\n            placeId: result.place_id,\n            name: result.structured_formatting.main_text,\n            subtitle: result.structured_formatting.secondary_text || '',\n            floor: 0\n          }\n        }));\n        resolve(places);\n      });\n    });\n  }\n  /**\n   * Get Mapbox Places results.\n   *\n   * @param {string} query\n   * @return {Promise<any>}\n   */\n  getMapboxSearchResults(query) {\n    if (this.mapbox && mapboxgl.accessToken) {\n      if (query) {\n        return new Promise((resolve) => {\n          const language = this.language.split('-')[0]; // Mapbox seemingly only supports the primary language subtag.\n          let url = `https://api.mapbox.com/search/searchbox/v1/suggest?q=${query}&session_token=${this.sessionToken}&access_token=${mapboxgl.accessToken}&language=${language}`;\n          if (this.userPosition) {\n            url = url.concat(`&proximity=${this.userPosition}`);\n          }\n          fetch(url)\n            .then((response) => {\n            return response.json();\n          })\n            .then((result) => {\n            const places = result.suggestions.map((result) => ({\n              id: result.mapbox_id,\n              type: 'Feature',\n              properties: {\n                type: 'mapbox_places',\n                placeId: result.mapbox_id,\n                name: result.name,\n                subtitle: result.place_formatted || '',\n                floor: 0\n              }\n            }));\n            resolve(places);\n          })\n            .catch(() => {\n            resolve([]);\n          });\n        });\n      }\n    }\n    else {\n      return Promise.resolve([]);\n    }\n  }\n  componentDidRender() {\n    if (this.dataAttributes) {\n      for (const key in this.dataAttributes) {\n        this.inputElement.setAttribute(key, this.dataAttributes[key]);\n      }\n    }\n    this.componentRendered.emit();\n  }\n  render() {\n    var _a;\n    return (h(Host, null, h(\"input\", { disabled: this.disabled, id: this.idAttribute ? this.idAttribute : null, type: \"search\", ref: (el) => this.inputElement = el, onInput: () => this.inputChanged(), placeholder: this.placeholder, autocomplete: \"off\" }), ((_a = this.inputElement) === null || _a === void 0 ? void 0 : _a.value) &&\n      h(\"button\", { type: \"button\", onClick: () => this.clear(), \"aria-label\": \"Clear\" }, h(\"svg\", { width: \"14\", height: \"14\", viewBox: \"0 0 14 14\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, h(\"path\", { d: \"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z\" })))));\n  }\n  static get watchers() { return {\n    \"value\": [\"valueChange\"]\n  }; }\n};\n__decorate([\n  Debounce(500)\n], Search.prototype, \"inputChanged\", null);\nSearch.style = searchCss;\n\nexport { Search as mi_search };\n"],"names":["Debounce$1","createCommonjsModule","module","exports","outerDecorator","debounce","DEFAULT_DEBOUNCE_DURATION","duration","target","key","descriptor","method","timeoutId","debounceWrapper","_this","_len","args","_key","dist","_interopExportWildcard","obj","defaults","newObj","_defaults","keys","i","value","_interopRequireDefault","_DebounceJs2","Debounce","getDefaultExportFromCjs","searchCss","__decorate","decorators","desc","c","r","d","Search","hostRef","registerInstance","createEvent","newValue","inputValue","displayText","results","locations","query","miNear","near","resolve","params","places","result","language","url","response","_a","h","Host","el"],"mappings":"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"}