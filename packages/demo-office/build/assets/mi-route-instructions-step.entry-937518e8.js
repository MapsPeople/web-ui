import{r as o,c as a,h as e}from"./index-584d014c.js";import{U as n}from"./unit-system.enum-eaefb53e-55614e45.js";import{c as p}from"./utils-ae714467-6b6b6e45.js";const l=':host{display:block;font-family:Figtree, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}.step{display:grid;gap:16px;justify-items:center}.step__info{display:grid;grid-auto-flow:column;align-items:center;justify-content:space-between;width:100%;position:sticky;top:50px;background:white;z-index:1000;padding-bottom:8px}.step__destination{display:grid;gap:8px;align-items:center;justify-content:center;grid-auto-flow:column}.step__heading{font-weight:500;font-size:1.25rem;margin:0}.step__heading>span{font-size:0.875rem;color:#6b7280}.step__travel-mode{display:flex;justify-content:center;align-items:center;position:relative;min-height:72px}.step__travel-mode::before{position:absolute;width:calc(50% - 2px);left:0;height:100%;content:""}.step__travel-mode--dotted::before{border-right:4px dotted #bfdbfe}.step__travel-mode--solid::before{border-right:4px solid #bfdbfe}.step__travel-mode-icon{position:absolute;left:50%;top:24px;transform:translateX(-50%);background-color:#fcfcfc;padding:3px;border-radius:4px}.step__travel-mode-icon mi-icon{width:16px;height:16px;background-color:#6b7280;display:block}.step__short-name{margin-right:4px;padding:2px 4px;font-size:0.875rem;color:#fcfcfc;background-color:#6b7280;border-radius:2px}.step__distance-duration{color:#6b7280;font-size:0.875rem}.step__toggle{display:grid;justify-content:center}.step__toggle mi-icon{width:24px;height:24px;display:block}.step__details{display:grid;gap:24px;width:100%}',d=class{constructor(t){o(this,t),this.stepClicked=a(this,"stepClicked",7),this.substepsToggled=a(this,"substepsToggled",7),this.isInternetExplorer=p(),this.step=void 0,this.stepData=void 0,this.hideIndoorSubsteps=!0,this.fromRouteContext="",this.fromTravelMode=void 0,this.fromTransitStop=void 0,this.unit=navigator.language==="en-US"?n.Imperial:n.Metric,this.showToggleButton=!0,this.translations=void 0,this.translationsData=void 0,this.substepsAreOpen=!1}parseStepProp(){this.step&&(this.stepData=JSON.parse(this.step))}parseTranslationsProp(){this.translations&&(this.translationsData=JSON.parse(this.translations))}openSubsteps(){this.substepsAreOpen=!0}closeSubsteps(){this.substepsAreOpen=!1}componentWillLoad(){this.parseStepProp(),this.parseTranslationsProp()}render(){return this.stepData&&this.translationsData?this.renderStep():null}stepClickHandler(t){if(Array.from(t.target.classList).includes("icon-toggle"))return;let s=null;t.target.dataset.maneuverIndex!==void 0&&(s=parseInt(t.target.dataset.maneuverIndex)),this.stepClicked.emit({maneuverIndex:s})}renderStep(){switch(this.stepData.travel_mode.toUpperCase()){case"DRIVING":return this.renderDrivingStep();case"WALKING":return this.renderWalkingStep();case"BICYCLING":return this.renderBicyclingStep();case"TRANSIT":return this.renderTransitStep();default:return e("div",null,"Unknown travel mode: ",this.stepData.travel_mode)}}renderTravelMode(){if(this.isInternetExplorer)return null;let t;switch(this.stepData.travel_mode.toUpperCase()){case"DRIVING":t="car";break;case"WALKING":t="walk";break;case"BICYCLING":t="bike";break;case"TRANSIT":t=this.getTransitVehicleIconName();break}return e("span",{part:"step-travel-mode",class:`step__travel-mode step__travel-mode--${this.stepData.travel_mode.toUpperCase()==="TRANSIT"?"solid":"dotted"}`},e("span",{class:"step__travel-mode-icon"},e("mi-icon",{part:"step-travel-mode-icon","icon-name":t})))}getTransitVehicleIconName(){var t,s;const i=(s=(t=this.stepData.transit_information)===null||t===void 0?void 0:t.line.vehicle)===null||s===void 0?void 0:s.type.toLowerCase();return i&&["boat","bus","railway","train","subway"].some(r=>r===i)?i:"transit"}toggleSubsteps(){this.substepsToggled.emit(),this.substepsAreOpen=!this.substepsAreOpen}renderSubsteps(){var t;return this.substepsAreOpen===!0?e("div",{class:"step__substeps"},(t=this.stepData.steps)===null||t===void 0?void 0:t.map((s,i)=>e("mi-route-instructions-maneuver",{"data-maneuver-index":i,maneuver:JSON.stringify(s),translations:this.translations,unit:this.unit,exportparts:`
                        maneuver-icon,
                        maneuver-description,
                        maneuver-description-distance,
                        maneuver-description-distance-border`}))):null}renderToggleButton(){var t;return((t=this.stepData.steps)===null||t===void 0?void 0:t.length)<=0||!this.showToggleButton?null:e("span",{class:"step__toggle",onClick:()=>this.toggleSubsteps()},this.substepsAreOpen?e("mi-icon",{part:"step-toggle","icon-name":"chevron-down"}):e("mi-icon",{part:"step-toggle","icon-name":"chevron-up"}))}renderDistance(){return e("span",{part:"step-info",class:"step__distance-duration"},e("mi-distance",{meters:this.stepData.distance.value,unit:this.unit}),e("br",null))}showSubsteps(){return e("div",{class:"step__details"},this.renderSubsteps())}renderDrivingStep(){return e("div",{class:"step",onClick:t=>this.stepClickHandler(t)},e("div",{class:"step__info"},e("div",{part:"step-heading",class:"step__heading"},this.getStepHeading()),this.renderToggleButton()),this.showSubsteps())}getStepHeading(){var t;const s={driving:this.translationsData.drive,walking:this.translationsData.walk,bicycling:this.translationsData.bike};return!((t=this.stepData.steps[0])===null||t===void 0)&&t.instructions?this.stepData.steps[0].instructions:s[this.stepData.travel_mode.toLowerCase()]}renderWalkingStep(){let t;return this.stepData.parking===!0?t=`${this.translationsData.park} ${this.stepData.label?` ${this.translationsData.at} `+this.stepData.label:""}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="STEPS"?t=`${this.translationsData.takeStaircaseToLevel} ${this.stepData.end_location.floor_name}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="LADDER"?t=`${this.translationsData.takeLadderToLevel} ${this.stepData.end_location.floor_name}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="ESCALATOR"?t=`${this.translationsData.takeEscalatorToLevel} ${this.stepData.end_location.floor_name}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="WHEELCHAIRRAMP"?t=`${this.translationsData.takeWheelchairRampToLevel} ${this.stepData.end_location.floor_name}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="WHEELCHAIRLIFT"?t=`${this.translationsData.takeWheelchairLiftToLevel} ${this.stepData.end_location.floor_name}`:this.stepData.highway&&this.stepData.highway.toUpperCase()==="ELEVATOR"?t=`${this.translationsData.takeElevatorToLevel} ${this.stepData.end_location.floor_name}`:this.fromRouteContext==="InsideBuilding"&&this.stepData.route_context==="Outside"?t=this.addStepContextNameToHeading(this.translationsData.exit,this.stepData.start_context):this.fromRouteContext==="InsideBuilding"&&this.stepData.route_context==="InsideBuilding"?t=this.getStepHeading():this.fromRouteContext==="Outside"&&this.stepData.route_context==="Outside"&&this.fromTravelMode.toUpperCase()==="TRANSIT"?t=this.fromTransitStop:this.fromRouteContext==="Outside"&&this.stepData.route_context==="Outside"?t=this.getStepHeading():this.fromRouteContext==="Outside"&&this.stepData.route_context==="InsideBuilding"?t=this.addStepContextNameToHeading(this.translationsData.enter,this.stepData.end_context):t=this.fromRouteContext,e("div",{class:"step",onClick:s=>this.stepClickHandler(s)},e("div",{class:"step__info"},e("div",{part:"step-heading",class:"step__heading"},t),this.renderToggleButton()),this.showSubsteps())}addStepContextNameToHeading(t,s){return s&&(s.building?t+=` ${s.building.buildingInfo.name} ${this.translationsData.building}`:s.venue&&(t+=` ${s.venue.venueInfo.name} ${this.translationsData.venue}`)),t}renderBicyclingStep(){return e("div",{class:"step",onClick:t=>this.stepClickHandler(t)},e("div",{class:"step__info"},e("div",{part:"step-heading",class:"step__heading"},this.getStepHeading()),this.renderToggleButton()),this.showSubsteps())}renderTransitStep(){var t,s;return e("div",{class:"step",onClick:i=>this.stepClickHandler(i)},e("div",{class:"step__info"},e("h3",{part:"step-heading",class:"step__heading"},this.stepData.instructions),this.renderToggleButton()),this.renderTravelMode(),e("div",{part:"step-description",class:"step__description"},this.stepData.transit_information.line.short_name?e("span",{class:"step__short-name",style:{backgroundColor:!((t=this.stepData.transit_information.line)===null||t===void 0)&&t.color?this.stepData.transit_information.line.color:null,color:!((s=this.stepData.transit_information.line)===null||s===void 0)&&s.text_color?this.stepData.transit_information.line.text_color:null}},this.stepData.transit_information.line.short_name):null,this.stepData.transit_information.headsign?this.stepData.transit_information.headsign:null,e("br",null),e("span",{part:"step-info",class:"step__distance-duration"},e("mi-time",{seconds:this.stepData.duration.value,translations:`{"days":"${this.translationsData.days}","hours":"${this.translationsData.hours}","minutes":"${this.translationsData.minutes}"}`})," · ",this.stepData.transit_information.num_stops?this.stepData.transit_information.num_stops:null," ",this.translationsData.stops?this.translationsData.stops:null)),this.showSubsteps())}static get watchers(){return{step:["parseStepProp"],translations:["parseTranslationsProp"]}}};d.style=l;export{d as mi_route_instructions_step};
//# sourceMappingURL=mi-route-instructions-step.entry-937518e8.js.map
