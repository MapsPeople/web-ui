{"version":3,"file":"mi-route-instructions.entry-2fea5d2c.js","sources":["../../../components/dist/esm/mi-route-instructions.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host } from './index-7e9696f3.js';\nimport { R as RouteTravelMode } from './route-travel-mode.enum-7f4ce9c7.js';\nimport { U as UnitSystem } from './unit-system.enum-eaefb53e.js';\nimport { c as isInternetExplorer } from './utils-ae714467.js';\n\nconst routeInstructionsCss = \":host{display:block;background-color:#fcfcfc;font-family:Figtree, -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Oxygen, Ubuntu, Cantarell, \\\"Fira Sans\\\", \\\"Droid Sans\\\", \\\"Helvetica Neue\\\", Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"}:host mi-route-instructions-step:hover{cursor:pointer;background-color:#f9fafb;transition:300ms ease}:host mi-route-instructions-step.active{background-color:#f3f4f6;transition:none;cursor:default}:host .instructions-destination{display:flex}:host .instructions-destination-icon{width:40px;display:flex;justify-content:center;align-items:center}:host .instructions-destination-icon mi-icon{width:24px;height:24px;background-color:#1c1917}:host .instructions-destination-details{flex:1;padding:12px}:host .instructions-destination-details mi-location-info{font-size:0.875rem}\";\n\nconst RouteInstructions = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.clicked = createEvent(this, \"clicked\", 7);\n    this.miStepElements = [];\n    this.lastStepRouteContext = null;\n    this.lastStepTravelMode = null;\n    this.lastStepTransitStop = null;\n    this.activeStep = {\n      legIndex: 0,\n      stepIndex: 0\n    };\n    this.unit = UnitSystem.Metric;\n    this.route = undefined;\n    this.hideIndoorSubsteps = false;\n    this.travelMode = RouteTravelMode.Walking;\n    this.originLocation = undefined;\n    this.originName = undefined;\n    this.destinationLocation = undefined;\n    this.destinationName = undefined;\n    this.translations = {\n      walk: 'Walk',\n      bike: 'Bike',\n      transit: 'Transit',\n      drive: 'Drive',\n      leave: 'Leave',\n      from: 'From',\n      park: 'Park',\n      at: 'at',\n      building: 'Building',\n      venue: 'Venue',\n      takeStaircaseToLevel: 'Take staircase to level',\n      takeLadderToLevel: 'Take the ladder to level',\n      takeElevatorToLevel: 'Take elevator to level',\n      takeEscalatorToLevel: 'Take escalator to level',\n      takeWheelchairLiftToLevel: 'Take wheelchair lift to level',\n      takeWheelchairRampToLevel: 'Take wheelchair ramp to level',\n      exit: 'Exit',\n      enter: 'Enter',\n      stops: 'stops',\n      andContinue: 'and continue',\n      continueStraightAhead: 'Continue straight ahead',\n      goLeft: 'Go left',\n      goSharpLeft: 'Go sharp left',\n      goSlightLeft: 'Go slight left',\n      goRight: 'Go right',\n      goSharpRight: 'Go sharp right',\n      goSlightRight: 'Go slight right',\n      turnAround: 'Turn around',\n      days: 'd',\n      hours: 'h',\n      minutes: 'min'\n    };\n  }\n  componentDidRender() {\n    this.miStepElements.forEach((element) => {\n      element.hideIndoorSubsteps = this.hideIndoorSubsteps;\n    });\n  }\n  /**\n   * Transform the step in legs to a flat array of steps.\n   *\n   * @returns {Step[]}\n   */\n  getRouteSteps() {\n    if (!this.route) {\n      return [];\n    }\n    return this.route.legs.reduce((accummulator, leg, legIndex) => {\n      for (const stepIndex in leg.steps) {\n        const step = leg.steps[stepIndex];\n        step.originalLegIndex = legIndex;\n        step.originalStepIndex = parseInt(stepIndex);\n        accummulator.push(step);\n      }\n      return accummulator;\n    }, []);\n  }\n  /**\n   * Updates the activeStep attribute and emits an object with leg, step and maneuver index information.\n   *\n   * @param {CustomEvent<any>} event Step object.\n   * @param {number} stepIndex step index.\n   */\n  stepClickedHandler(event, stepIndex) {\n    const originalStep = this.getRouteSteps()[stepIndex];\n    // Update activeStep attribute\n    this.activeStep = {\n      legIndex: originalStep.originalLegIndex,\n      stepIndex: originalStep.originalStepIndex\n    };\n    this.clicked.emit({\n      legIndex: originalStep.originalLegIndex,\n      stepIndex: originalStep.originalStepIndex,\n      maneuverIndex: event.detail.maneuverIndex\n    });\n  }\n  /**\n   * Check if the step is active.\n   *\n   * @param {Step} step\n   * @returns {boolean}\n   */\n  isActiveStep(step) {\n    // Check that activeStep attribute is set\n    if (!this.activeStep)\n      return false;\n    // Check that the indexes matches those set at the activeStep attribute\n    const isActiveStep = this.activeStep.legIndex === step.originalLegIndex &&\n      this.activeStep.stepIndex === step.originalStepIndex;\n    return isActiveStep;\n  }\n  render() {\n    return this.route ? this.renderInstructions() : null;\n  }\n  /**\n   * Render instructions.\n   *\n   * @returns {JSX.Element}\n   */\n  renderInstructions() {\n    return (h(Host, null, this.getRouteSteps().map((currentStep, stepIndex) => {\n      var _a, _b, _c, _d, _e;\n      const originName = ((_b = (_a = this.originLocation) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.name) ? this.originLocation.properties.name : this.originName || '';\n      const isFirstRouteStep = currentStep.originalLegIndex === 0 && currentStep.originalStepIndex === 0;\n      const lastStepRouteContext = isFirstRouteStep ? originName : this.lastStepRouteContext;\n      const lastTravelMode = this.lastStepTravelMode;\n      const lastTransitStop = this.lastStepTransitStop;\n      this.lastStepRouteContext = currentStep.route_context;\n      this.lastStepTravelMode = currentStep.travel_mode;\n      this.lastStepTransitStop = ((_d = (_c = currentStep.transit_information) === null || _c === void 0 ? void 0 : _c.arrival_stop) === null || _d === void 0 ? void 0 : _d.name) ? (_e = currentStep.transit_information) === null || _e === void 0 ? void 0 : _e.arrival_stop.name : null;\n      return h(\"mi-route-instructions-step-legacy\", { ref: (el) => this.miStepElements.push(el), \"from-travel-mode\": lastTravelMode, \"from-route-context\": lastStepRouteContext, \"from-transit-stop\": lastTransitStop, step: JSON.stringify(currentStep), translations: JSON.stringify(this.translations), unit: this.unit, onStepClicked: (event) => this.stepClickedHandler(event, stepIndex), class: this.isActiveStep(currentStep) ? 'active' : '', part: this.isActiveStep(currentStep) ? 'step active' : 'step',\n        // @ts-ignore\n        exportparts: \"\\n                            step-toggle,\\n                            step-heading,\\n                            step-description,\\n                            step-info,\\n                            step-travel-mode,\\n                            step-travel-mode-icon,\\n                            maneuver-icon,\\n                            maneuver-description,\\n                            maneuver-description-distance,\\n                            maneuver-description-distance-border\" });\n    }), this.destinationLocation || this.destinationName ? this.renderDestination() : null));\n  }\n  /**\n   * Render destination.\n   *\n   * @returns {JSX.Element}\n   */\n  renderDestination() {\n    return (h(\"div\", { class: \"instructions-destination\" }, h(\"div\", { class: \"instructions-destination-icon\" }, isInternetExplorer() ? null :\n      h(\"mi-icon\", { \"icon-name\": \"marker\" })), h(\"div\", { part: \"instructions-destination\", class: \"instructions-destination-details\" }, this.destinationLocation ? this.destinationLocation.properties.name : this.destinationName, this.destinationLocation ? h(\"mi-location-info\", { part: \"instructions-destination-info\", location: this.destinationLocation }) : null)));\n  }\n};\nRouteInstructions.style = routeInstructionsCss;\n\nexport { RouteInstructions as mi_route_instructions };\n"],"names":["routeInstructionsCss","RouteInstructions","hostRef","registerInstance","createEvent","UnitSystem","RouteTravelMode","element","accummulator","leg","legIndex","stepIndex","step","event","originalStep","h","Host","currentStep","_a","_b","_c","_d","_e","originName","lastStepRouteContext","lastTravelMode","lastTransitStop","el","isInternetExplorer"],"mappings":"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"}